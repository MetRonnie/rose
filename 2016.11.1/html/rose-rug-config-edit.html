<!DOCTYPE html>
<html>
<head>

  <title>Rose User Guide: Rose Config Edit</title>
  <meta name="author" content="Rose Team, Met Office, UK" />
  <meta http-equiv="Content-Type" content=
  "text/html; charset=us-ascii" />
  <link rel="icon" href="img/rose-icon.png" type="image/png" />
  <link rel="shortcut icon" href="img/rose-icon.png" type=
  "image/png" />
  <link rel="stylesheet" type="text/css" href=
  "css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="css/rose-doc.css" />
  <script type="text/javascript" src="js/jquery.min.js">
</script>
  <script type="text/javascript" src="js/run_prettify.js">
</script>
  <script type="text/javascript" src="js/prettify-rose-conf.js">
</script>
  <script type="text/javascript" src=
  "js/prettify-cylc-suite-rc.js">
</script>
  <script type="text/javascript" src="js/bootstrap.min.js">
</script>
  <script type="text/javascript" src="js/rose-doc.js">
</script>
  <script type="text/javascript" src="js/rose-version.js">
</script>
</head>

<body>
  <nav class="navbar navbar-default">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="."><span class="logo">Rose
        Documentation</span></a>
      </div>
      <!-- Collect the nav links, forms, and other content for toggling -->

      <div class="collapse navbar-collapse" id=
      "bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
          <li><a href="rose-single-page.html">Single
          Page Version</a></li>
        </ul>

        <ul class="nav navbar-nav navbar-right">
          <li><span class="navbar-text"><span class=
          "compliance">&#169; British Crown Copyright 2012-6
          <a href="http://www.metoffice.gov.uk">Met Office</a>. See
          <a href="rose-terms-of-use.html">Terms of Use</a>.<br />
          This document is released under the <a href=
          "http://www.nationalarchives.gov.uk/doc/open-government-licence/"
          rel="license">Open Government
          Licence</a>.</span></span></li>

          <li><span id="rose-version" class=
          "navbar-text"></span></li>
        </ul>
      </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
  </nav>

  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div id="panel-main" class="panel panel-default">
          <div class="panel-heading">
            <h1>Rose User Guide: Rose Config Edit</h1>
          </div>

          <div id="body-main" class="panel-body">
            <div id="content"></div>

            <h2 id="run">How to Run Rose Config Edit</h2>

            <p>In a suite or application directory, run:</p>
            <pre class='shell'>
rose config-edit
</pre>

            <p>or point the config editor to a directory using
            <kbd>-C</kbd>:</p>
            <pre class='shell'>
rose config-edit -C ~/my_suites/this_suite
</pre>

            <h2 id="config-app">How to Configure an Application
            Using Rose Config Edit</h2>

            <h3 id="launch-page">Launch a Page</h3>

            <p>A page is a collection of settings on a single
            panel. Unless overridden in the metadata, each page
            represents a section in the configuration.</p>

            <p>Use the left hand panel to explore the tree of
            pages. Left click the triangles to expand the tree,
            right click them to expand everything.</p>

            <p><img width="80%" src=
            "img/rose-config-edit-expand-tree.png" alt=
            "expand tree image" /></p>

            <table summary="Caption table">
              <tr>
                <td><em>The 'expander' triangles can expand the
                list of available pages. You can left or right
                click here.</em></td>
              </tr>
            </table>

            <p>Left click on the page name to open it as a tab in
            the main (right hand) panel. Middle click to open a
            page as another tab (as in Firefox). You may right
            click on the tab label (at the top of the tab) to open
            a menu, and select <kbd>Open in New Window</kbd> to
            detach the tab to a separate window.</p>

            <p><img width="80%" src=
            "img/rose-config-edit-launch-page.png" alt=
            "launch page image" /></p>

            <table summary="Caption table">
              <tr>
                <td><em>You can launch a tab by clicking on a row
                in the left hand navigation list (left or middle
                click), or open a tab in a new window (right click
                on tab label).</em></td>
              </tr>
            </table>

            <h3 id="alter-setting">Alter a Setting</h3>

            <p>Hovering over the setting name or title, or clicking
            it, will give more information about the setting if it
            is available.</p>

            <p>Use the right hand side widget, next to the setting
            name or title, to alter the value of the setting. This
            should flag the setting as modified (blue name or title
            text). It should also flag the page name with a blue
            icon in the left hand tree panel.</p>

            <p>You can remove the setting or toggle the
            commenting-out of the setting using the menu button on
            the left hand side of the setting name or title. This
            menu will also hold help information if it is
            available.</p>

            <p><img width="80%" src=
            "img/rose-config-edit-hover-and-alter.png" alt=
            "hover and alter" /></p>

            <table summary="Caption table">
              <tr>
                <td><em>The blue disc icon in the page list
                indicates changed values, as does the blue text at
                the mouse pointer. The hover-over text gives more
                information and includes a description of the
                change at the bottom.</em></td>
              </tr>
            </table>

            <h3 id="adding-settings">Adding Settings</h3>

            <p>You can add a setting by selecting the
            <kbd>Add</kbd> button on the toolbar. You can then
            choose between adding a blank variable (a new setting
            with no metadata specification) or adding from a list
            of available settings for this page. If you choose a
            blank variable, you must then enter the name when the
            widget appears, using the entry box next to the menu
            button.</p>

            <p><img width="80%" src=
            "img/rose-config-edit-add-menu.png" alt=
            "add menu image" /></p>

            <table summary="Caption table">
              <tr>
                <td><em>The add menu, indicating which settings are
                available for this page. A setting with a custom
                name can also be added ("Add blank
                variable").</em></td>
              </tr>
            </table>

            <p><img width="80%" src=
            "img/rose-config-edit-add-blank-var.png" alt=
            "add blank variable image" /></p>

            <table summary="Caption table">
              <tr>
                <td><em>Entering a name for a custom setting, after
                selecting "Add blank variable" from the above add
                menu.</em></td>
              </tr>
            </table>

            <p>Alternately, you can view a list of available
            settings for the page by selecting <kbd>View -&gt; View
            Latent</kbd> from the menu. You can then add them using
            their menu buttons (left hand widget next to the name
            or title).</p>

            <p><img width="80%" src=
            "img/rose-config-edit-add-latent-var.png" alt=
            "add from latent image" /></p>

            <table summary="Caption table">
              <tr>
                <td><em>Adding an available setting, using the
                <kbd>View -&gt; View Latent</kbd> view
                option.</em></td>
              </tr>
            </table>

            <h3 id="find-settings">Finding Settings</h3>

            <p>Settings can be found using the Find entry box in
            the toolbar, which searches for a title, name, or value
            that matches the regular expression you entered. For
            example, to search for a setting whose name startswith
            'l' and ends with 'rad', enter</p>
            <pre>
^l.*rad$
</pre>

            <p>in the dialog box and press enter (or use the Find
            Next button).</p>

            <p>To ignore case, pass the Python modifier
            <code>(?i)</code> before the rest of the
            expression:</p>
            <pre>
(?i)^l.*rad$
</pre>

            <h3 id="view-special">Viewing Special Settings</h3>

            <p>Some settings are hidden by default - these can be
            shown using the View menu. <kbd>View Fixed</kbd> shows
            the settings that are only allowed to have one value
            according to the metadata.</p>

            <p><img width="80%" src=
            "img/rose-config-edit-fixed-vars.png" alt=
            "fixed ignored variables image" /></p>

            <table summary="Caption table">
              <tr>
                <td><em>The figure shows a 'fixed'
                variable.</em></td>
              </tr>
            </table>

            <p><kbd>View Ignored</kbd> shows the settings that are
            currently 'commented-out'.</p>

            <p><img width="80%" src=
            "img/rose-config-edit-ignored-vars.png" alt=
            "fixed ignored variables image" /></p>

            <table summary="Caption table">
              <tr>
                <td><em>The figure shows a 'user-ignored'
                variable.</em></td>
              </tr>
            </table>

            <h3 id="switc-off-metadata">Switching off metadata</h3>

            <p>Sometimes it is necessary to switch off metadata. This
            can be done via the menu item <kbd>Metadata &gt; Switch
            off metadata</kbd>. This allows you to view the data to
            be presented without the type widgets. For example, if you
            need to modify an integer setting to use an environment
            variable substitution syntax, you will not be able to do
            so using an integer widget (which will not even allow
            you to type a <kbd>$</kbd> sign). In this case, you can
            switch off the metadata, type the new value in the raw
            input text box, then switch metadata back on again.</p>

            <h3 id="add-section">Adding a Section</h3>

            <p>Navigate to the part of the tree (left hand tree
            panel) where you wish to add a section and right click
            on one of the names. Choose <kbd>Add section</kbd> and
            type in the name in the dialog. You can then add
            settings to the section in the normal way.</p>

            <h3 id="clone-section">Cloning a Section</h3>

            <p>Some sections are effectively duplicates of one
            another (e.g. numbered same-name namelists). To speed
            up copying these sections, you can right click on their
            page name in the left hand tree panel and select 'Clone
            section'.</p>

            <h3 id="remove-section">Removing a Section or Set of
            Sections</h3>

            <p>Right click on the part of the tree (page name in
            the left hand tree panel) that you want to remove and
            click <kbd>Remove</kbd>. This will remove all the
            settings belonging to the page and any child pages from
            the tree and configuration.</p>

            <h3 id="page-help">Accessing Page Help</h3>

            <p>Page help can be accessed using either the left hand
            tree panel (right click on the page name) or the
            tab/page label (right click).</p>

            <h3 id="undoing">Undoing Changes</h3>

            <p>You can undo your changes by pressing
            <kbd>Undo</kbd> on the toolbar, or by clicking the
            <kbd>Revert page to last save</kbd> button on the
            toolbar. Similarly, you can redo them by pressing
            <kbd>Redo</kbd>.</p>

            <h3 id="saving">Saving Changes</h3>

            <p>Use the <kbd>File-&gt;Save</kbd> or the
            <kbd>Save</kbd> button on the toolbar in the normal
            way. These options will be greyed out if there is no
            difference between the last saved state and the current
            one.</p>

            <h2 id="layout">Rose Config Edit Layout</h2>

            <p><img width="80%" src=
            "img/rose-config-edit-layout.png" alt="layout" /></p>

            <table summary="Layout caption table">
              <tr>
                <td>
                  <em>Layout:</em>

                  <ol>
                    <li><em>Open</em></li>

                    <li><em>Save</em></li>

                    <li><em>File browser</em></li>

                    <li><em>Undo</em></li>

                    <li><em>Redo</em></li>

                    <li><em>Add setting to current page</em></li>

                    <li><em>Revert current page to last saved
                    state</em></li>

                    <li><em>Find (regular expression)</em></li>

                    <li><em>Find Next</em></li>

                    <li><em>Validate</em></li>

                    <li><em>Run Suite</em></li>

                    <li><em>Run Suite (custom)</em></li>

                    <li><em>Navigation panel</em></li>

                    <li><em>Modified-since-last-save indicator
                    (blue disc)</em></li>

                    <li><em>Highlighted row for the current
                    page</em></li>

                    <li><em>Error indicator (red
                    triangle)</em></li>

                    <li><em>Page tab (right click for
                    menu)</em></li>

                    <li><em>Variable menu</em></li>

                    <li><em>Variable label</em></li>

                    <li><em>Variable value</em></li>

                    <li><em>Blue variable label for
                    modified-since-last-save</em></li>

                    <li><em>Add available variable</em></li>
                  </ol>
                </td>
              </tr>
            </table>

            <h2 id="customisation">Customising Rose
            Config-Edit</h2>

            <h3 id="themes">Customising Themes and Colours</h3>

            <p>The default style, font, and some colours of the
            config editor are controlled by the GNOME desktop
            theme. This can be altered by running:</p>
            <pre>
gnome-appearance-properties
</pre>

            <p>There are a few hard coded colours in the config
            editor that should be overridden if the theme is
            substantially different from the standard blue
            widget/grey background. These live in the <a href=
            "https://github.com/metomi/rose/blob/master/lib/python/rose/config_editor/__init__.py">
            config_editor/__init__.py</a> file.</p>

            <p>The default colours can be overridden by creating a
            <a href="rose-configuration.html#site">user
            configuration</a> file <samp>~/.metomi/rose.conf</samp>
            in your home directory, if it doesn't already exist,
            and adding text such as this:</p>
            <pre class="prettyprint lang-rose_conf">
[rose-config-edit]
colour_valuewidget_base_selected=Lemon Chiffon
colour_variable_text_val_env=green
colour_variable_changed=Medium Orchid
</pre>

            <p>These option names are lowercased translations of
            the constants in the <a href=
            "https://github.com/metomi/rose/blob/master/lib/python/rose/config_editor/__init__.py">
            config_editor/__init__.py</a> file. Any of the colours
            specified there (constants that begin with "COLOUR")
            can be changed easily. The allowed colour strings are
            specified in the X11 <var>rgb.txt</var> file and are
            quite extensive.</p>

            <h3 id="views">Customising Views and Layouts</h3>

            <p>Changes are not restricted to colours - any
            constants in this python module can be overridden in
            your <samp>rose.conf</samp> file (but be careful with
            some of them!).</p>

            <p>The view and layout defaults in the config editor
            can be overridden using the <samp>rose.conf</samp>
            file. Have a look at the constants in <a href=
            "https://github.com/metomi/rose/blob/master/lib/python/rose/config_editor/__init__.py">
            config_editor/__init__.py</a> beginning with
            "SHOULD_SHOW".</p>

            <p>These can be altered by adding to your site or user
            configuration as explained in <a href=
            "#themes">Customising Themes and Colours</a> - for
            example, to show latent pages and variables by default,
            include the following in your site or user
            configuration:</p>
            <pre class="prettyprint lang-rose_conf">
[rose-config-edit]
should_show_latent_pages=True
should_show_latent_vars=True
</pre>

            <p>You can even set custom layout strings for the
            title, description, and help of settings - see the
            constants beginning with "SHOULD_SHOW_CUSTOM" and
            "CUSTOM_FORMAT". For example, to always include the
            description of a setting in the help string presented
            to the user, you could place the following text in your
            site or user configuration:</p>
            <pre class="prettyprint lang-rose_conf">
[rose-config-edit]
custom_format_help="{description}\n\n{help}"
should_show_custom_help=True
</pre>

            <h3 id="options">Customisable Options Reference</h3>

            <p>The following are potentially useful options that
            you may want to set in your site or user configuration
            under the <samp>[rose-config-edit]</samp> section.</p>

            <h4 id="options-colour_macro_changed">
            colour_macro_changed="blue"</h4>

            <p>Configure the colour for 'changed' action.</p>

            <h4 id="options-colour_macro_error">
            colour_macro_error="red"</h4>

            <p>Configure the colour for an error.</p>

            <h4 id="options-colour_macro_warning">
            colour_macro_warning="orange"</h4>

            <p>Configure the colour for a warning.</p>

            <h4 id="options-colour_stack_added">
            colour_stack_added="green"</h4>

            <p>Configure the colour for 'added' action.</p>

            <h4 id="options-colour_stack_changed">
            colour_stack_changed="blue"</h4>

            <p>Configure the colour for 'changed' action.</p>

            <h4 id="options-colour_stack_changed_comments">
            colour_stack_changed_comments="dark blue"</h4>

            <p>Configure the colour for 'changed comments'
            action.</p>

            <h4 id="options-colour_stack_enabled">
            colour_stack_enabled="light green"</h4>

            <p>Configure the colour for 'light green' action.</p>

            <h4 id="options-colour_stack_ignored">
            colour_stack_ignored="grey"</h4>

            <p>Configure the colour for 'grey' action.</p>

            <h4 id="options-colour_stack_removed">
            colour_stack_removed="red"</h4>

            <p>Configure the colour for 'red' action.</p>

            <h4 id="options-colour_valuewidget_base_selected">
            colour_valuewidget_base_selected="ghostwhite"</h4>

            <p>Configure the background colour for the
            currently-selected variable widget.</p>

            <h4 id="options-colour_variable_changed">
            colour_variable_changed="blue"</h4>

            <p>Configure the modified-status variable widget
            colour.</p>

            <h4 id="options-colour_variable_text_error">
            colour_variable_text_error="dark red"</h4>

            <p>Configure the error-state variable widget
            colour.</p>

            <h4 id="options-colour_variable_text_irrelevant">
            colour_variable_text_irrelevant="light grey"</h4>

            <p>Configure the irrelevant-value variable widget
            colour.</p>

            <h4 id="options-colour_variable_text_val_env">
            colour_variable_text_val_env="purple4"</h4>

            <p>Configure the environment-variable-value variable
            widget colour.</p>

            <h4 id="options-custom_format_description">
            custom_format_description="{name}: {description}"</h4>

            <p>Configure the override custom format used for
            description.</p>

            <h4 id="options-custom_format_help">
            custom_format_help="{title}\n\n{help}"</h4>

            <p>Configure the override custom format used for
            help.</p>

            <h4 id="options-custom_format_title">
            custom_format_title="{title} ({name})"</h4>

            <p>Configure the override custom format used for
            title.</p>

            <h4 id="options-should_show_all_comments">
            should_show_all_comments=False</h4>

            <p>Control showing all comment text.</p>

            <h4 id="options-should_show_custom_description">
            should_show_custom_description=False</h4>

            <p>Control showing a custom variable description
            format.</p>

            <h4 id="options-should_show_custom_help">
            should_show_custom_help=False</h4>

            <p>Control showing a custom variable help format.</p>

            <h4 id="options-should_show_custom_title">
            should_show_custom_title=False</h4>

            <p>control showing a custom variable title format.</p>

            <h4 id="options-should_show_fixed_vars">
            should_show_fixed_vars=False</h4>

            <p>Control showing fixed variables on a page.</p>

            <h4 id="options-should_show_flag_no_meta_vars">
            should_show_flag_no_meta_vars=False</h4>

            <p>Control flagging no-metadata variables.</p>

            <h4 id="options-should_show_flag_opt_conf_vars">
            should_show_flag_opt_conf_vars=True</h4>

            <p>Control flagging optional configuration
            variables.</p>

            <h4 id="options-should_show_flag_optional_vars">
            should_show_flag_optional_vars=False</h4>

            <p>Control flagging non-compulsory variables.</p>

            <h4 id="options-should_show_ignored_pages">
            should_show_ignored_pages=False</h4>

            <p>Control showing ! or !! ignored pages.</p>

            <h4 id="options-should_show_ignored_vars">
            should_show_ignored_vars=False</h4>

            <p>Control showing ! or !! ignored variables on a
            page.</p>

            <h4 id="options-should_show_latent_pages">
            should_show_latent_pages=False</h4>

            <p>Control showing latent (potential) pages.</p>

            <h4 id="options-should_show_latent_vars">
            should_show_latent_vars=False</h4>

            <p>Control showing latent (potential) variables on a
            page.</p>

            <h4 id="options-should_show_no_description">
            should_show_no_description=False</h4>

            <p>control hiding the description text for variables on
            a page.</p>

            <h4 id="options-should_show_no_help">
            should_show_no_help=True</h4>

            <p>Control hiding the help text for variables on a
            page.</p>

            <h4 id="options-should_show_no_title">
            should_show_no_title=False</h4>

            <p>Control hiding the title text for variables on a
            page.</p>

            <h4 id="options-should_show_status_bar">
            should_show_status_bar=True</h4>

            <p>Control showing the status bar.</p>

            <h4 id="options-should_show_user_ignored_pages">
            should_show_user_ignored_pages=True</h4>

            <p>Control showing ! ignored pages.</p>

            <h4 id="options-should_show_user_ignored_vars">
            should_show_user_ignored_vars=True</h4>

            <p>Control showing ! ignored variables on a page.</p>

            <h4 id="options-size_macro_dialog_max">
            size_macro_dialog_max=(800, 600)</h4>

            <p>Configure the width and height of the macro dialog
            in pixels (as a tuple).</p>

            <h4 id="options-size_page_detach">
            size_page_detach=(650, 600)</h4>

            <p>Configure the width and height of a detached tab in
            pixels (as a tuple).</p>

            <h4 id="options-size_stack">size_stack=(800, 600)</h4>

            <p>Configure the width and height of the stack viewer
            in pixels (as a tuple).</p>

            <h4 id="options-size_window">size_window=(900,
            600)</h4>

            <p>Configure the width and height of the config editor
            in pixels (as a tuple).</p>

            <h4 id="options-spacing_page">spacing_page=10</h4>

            <p>Configure the pixel padding/spacing between config
            editor major items.</p>

            <h4 id="options-spacing_sub_page">
            spacing_sub_page=5</h4>

            <p>Configure the pixel padding/spacing between config
            editor minor items.</p>

            <h4 id="options-summary_data_panel_error_markup">
            summary_data_panel_error_markup="&lt;span
            color='red'&gt;x&lt;/span&gt;"</h4>

            <p>Configure the pango markup used to indicate an
            error.</p>

            <h4 id="options-summary_data_panel_modified_markup">
            summary_data_panel_modified_markup="&lt;span
            color='blue'&gt;*&lt;/span&gt;"</h4>

            <p>Configure the pango markup used to indicate modified
            state.</p>

            <h4 id="options-title_page_latent_colour">
            title_page_latent_colour="grey"</h4>

            <p>Configure the colour used to indicate a latent page
            in the page tree.</p>

            <h4 id="options-tree_panel_max_expanded_depth">
            tree_panel_max_expanded_depth=2</h4>

            <p>Configure the depth to which the page tree will
            expand itself.</p>

            <h4 id="options-tree_panel_max_expanded_roots">
            tree_panel_max_expanded_roots=5</h4>

            <p>Configure the maximum number of configurations
            loaded at startup.</p>

            <h4 id="options-tree_panel_no_expand_leaves_regex">
            tree_panel_no_expand_leaves_regex="/file$"</h4>

            <p>Configure a regex for pages whose children should
            not be expanded.</p>

            <h4 id="options-width_tree_panel">
            width_tree_panel=256</h4>

            <p>Configure the width of the lhs page tree in
            pixels.</p>
          </div>

          <div id="footer" class="panel-footer">
            <ul class="nav nav-pills" id="pagenav">
              <li><button id="back-button" class=
              "btn btn-default">Previous</button></li>

              <li><button id="next-button" class=
              "btn btn-primary">Next</button></li>
            </ul>

            <ul class="nav nav-pills" id="control-nav">
              <li>
                <div id="controls"></div>
              </li>
            </ul>

            <ul class="nav nav-pills pull-right">
              <li>
                <div id="currentSlide"></div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
